{"version":3,"sources":["components/ui/Wysiwyg.tsx"],"names":["rawContentState","entityMap","type","mutability","data","src","height","width","blocks","key","text","depth","inlineStyleRanges","entityRanges","offset","length","Wysiwyg","state","editorContent","undefined","contentState","editorState","onEditorChange","setState","clearContent","onContentStateChange","console","log","onEditorStateChange","imageUploadCallBack","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","this","className","breads","gutter","md","title","bordered","toolbarClassName","wrapperClassName","editorClassName","toolbar","history","inDropdown","inline","list","textAlign","image","uploadCallback","placeholder","spellCheck","onFocus","onBlur","onTab","localization","locale","translations","mention","separator","trigger","caseSensitive","suggestions","value","url","draftToHtml","style","whiteSpace","draftToMarkdown","stringify","Component"],"mappings":"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","file":"static/js/4.2cca6354.chunk.js","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/26.\n */\nimport React, { Component } from 'react';\nimport { Row, Col, Card } from 'antd';\nimport BreadcrumbCustom from '../widget/BreadcrumbCustom';\nimport { Editor } from 'react-draft-wysiwyg';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport draftToHtml from 'draftjs-to-html';\nimport draftToMarkdown from 'draftjs-to-markdown';\nimport { EditorState } from 'draft-js';\n\nconst rawContentState = {\n    entityMap: {\n        '0': {\n            type: 'IMAGE',\n            mutability: 'MUTABLE',\n            data: { src: 'http://i.imgur.com/aMtBIep.png', height: 'auto', width: '100%' },\n        },\n    },\n    blocks: [\n        {\n            key: '9unl6',\n            text: '',\n            type: 'unstyled',\n            depth: 0,\n            inlineStyleRanges: [],\n            entityRanges: [],\n            data: {},\n        },\n        {\n            key: '95kn',\n            text: ' ',\n            type: 'atomic',\n            depth: 0,\n            inlineStyleRanges: [],\n            entityRanges: [{ offset: 0, length: 1, key: 0 }],\n            data: {},\n        },\n        {\n            key: '7rjes',\n            text: '',\n            type: 'unstyled',\n            depth: 0,\n            inlineStyleRanges: [],\n            entityRanges: [],\n            data: {},\n        },\n    ],\n};\ntype WysiwygState = {\n    editorContent: any;\n    contentState: any;\n    editorState: EditorState | undefined;\n};\nclass Wysiwyg extends Component {\n    state: WysiwygState = {\n        editorContent: undefined,\n        contentState: rawContentState,\n        editorState: undefined,\n    };\n\n    onEditorChange = (editorContent: any) => {\n        this.setState({\n            editorContent,\n        });\n    };\n\n    clearContent = () => {\n        this.setState({\n            contentState: '',\n        });\n    };\n\n    onContentStateChange = (contentState: any) => {\n        console.log('contentState', contentState);\n    };\n\n    onEditorStateChange = (editorState: any) => {\n        this.setState({\n            editorState,\n        });\n    };\n\n    imageUploadCallBack = (file: any) =>\n        new Promise((resolve, reject) => {\n            const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n            xhr.open('POST', 'https://api.imgur.com/3/image');\n            xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n            const data = new FormData(); // eslint-disable-line no-undef\n            data.append('image', file);\n            xhr.send(data);\n            xhr.addEventListener('load', () => {\n                const response = JSON.parse(xhr.responseText);\n                resolve(response);\n            });\n            xhr.addEventListener('error', () => {\n                const error = JSON.parse(xhr.responseText);\n                reject(error);\n            });\n        });\n\n    render() {\n        const { editorContent, editorState } = this.state;\n        return (\n            <div className=\"gutter-example button-demo\">\n                <BreadcrumbCustom breads={['UI', '富文本']} />\n                <Row gutter={16}>\n                    <Col className=\"gutter-row\" md={24}>\n                        <div className=\"gutter-box\">\n                            <Card title=\"富文本编辑器\" bordered={false}>\n                                <Editor\n                                    editorState={editorState}\n                                    toolbarClassName=\"home-toolbar\"\n                                    wrapperClassName=\"home-wrapper\"\n                                    editorClassName=\"home-editor\"\n                                    onEditorStateChange={this.onEditorStateChange}\n                                    toolbar={{\n                                        history: { inDropdown: true },\n                                        inline: { inDropdown: false },\n                                        list: { inDropdown: true },\n                                        textAlign: { inDropdown: true },\n                                        image: { uploadCallback: this.imageUploadCallBack },\n                                    }}\n                                    onContentStateChange={this.onEditorChange}\n                                    placeholder=\"请输入正文~~尝试@哦，有惊喜\"\n                                    spellCheck\n                                    onFocus={() => {\n                                        console.log('focus');\n                                    }}\n                                    onBlur={() => {\n                                        console.log('blur');\n                                    }}\n                                    onTab={() => {\n                                        console.log('tab');\n                                        return true;\n                                    }}\n                                    localization={{\n                                        locale: 'zh',\n                                        translations: { 'generic.add': 'Test-Add' },\n                                    }}\n                                    mention={{\n                                        separator: ' ',\n                                        trigger: '@',\n                                        caseSensitive: true,\n                                        suggestions: [\n                                            { text: 'A', value: 'AB', url: 'href-a' },\n                                            { text: 'AB', value: 'ABC', url: 'href-ab' },\n                                            { text: 'ABC', value: 'ABCD', url: 'href-abc' },\n                                            { text: 'ABCD', value: 'ABCDDDD', url: 'href-abcd' },\n                                            { text: 'ABCDE', value: 'ABCDE', url: 'href-abcde' },\n                                            { text: 'ABCDEF', value: 'ABCDEF', url: 'href-abcdef' },\n                                            {\n                                                text: 'ABCDEFG',\n                                                value: 'ABCDEFG',\n                                                url: 'href-abcdefg',\n                                            },\n                                        ],\n                                    }}\n                                />\n\n                                <style>{`\n                                    .home-editor {\n                                        min-height: 300px;\n                                    }\n                                `}</style>\n                            </Card>\n                        </div>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换HTML\" bordered={false}>\n                            <pre>{draftToHtml(editorContent)}</pre>\n                        </Card>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换MarkDown\" bordered={false}>\n                            <pre style={{ whiteSpace: 'pre-wrap' }}>\n                                {draftToMarkdown(editorContent)}\n                            </pre>\n                        </Card>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换JSON\" bordered={false}>\n                            <pre style={{ whiteSpace: 'normal' }}>\n                                {JSON.stringify(editorContent)}\n                            </pre>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default Wysiwyg;\n"],"sourceRoot":""}